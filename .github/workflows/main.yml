name: Java CI with Maven

# Kích hoạt workflow khi có push hoặc pull request lên nhánh main
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:

    runs-on: ubuntu-latest # Chọn hệ điều hành để chạy (runner)

    steps:
      # Bước 1: Checkout code từ repository
      - uses: actions/checkout@v4

      # Bước 2: Thiết lập môi trường Java
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17' # Thay bằng phiên bản JDK bạn dùng
          distribution: 'temurin'
          cache: maven # Nếu dùng Maven

      # Bước 3: Chạy Unit Test và Build (kiểm tra pass/fail)
      - name: Build with Maven
        run: mvn clean install -DskipTests # Build mà không chạy test (tùy chọn)

      # Bước 4: Chạy Unit Test (Quan trọng nhất)
      - name: Run Tests
        run: mvn test
        # Nếu các unit test (Phần 1, Phần 2) thất bại, bước này sẽ fail và workflow dừng lại.